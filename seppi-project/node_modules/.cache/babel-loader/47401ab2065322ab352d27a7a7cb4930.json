{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Users/sfind/Desktop/COP4331-Large-Project/seppi-project/src/components/Login.js\";\nimport React, { useState } from 'react';\nimport LoginToRegister from './LoginToRegister';\nimport { Link } from \"react-router-dom\";\n\nconst Login = () => {\n  const app_name = 'seppi';\n\n  const buildPath = route => {\n    if (process.env.NODE_ENV === 'production') {\n      return 'https://' + app_name + '.herokuapp.com/' + route;\n    } else {\n      return 'http://localhost:5000/' + route;\n    }\n  };\n\n  const initialState = {\n    email: \"\",\n    password: \"\"\n  };\n  const [data, setData] = React.useState(initialState);\n  const [message, setMessage] = React.useState('');\n\n  const handleChange = event => {\n    setData({ ...data,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const doLogin = async event => {\n    event.preventDefault();\n    var obj = {\n      email: data.email.value,\n      password: data.password.value\n    };\n    var js = JSON.stringify(obj); // alert(js);\n\n    try {\n      const response = await fetch(buildPath('api/login'), {\n        method: 'POST',\n        body: js,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      var res = JSON.parse(await response.text());\n      alert(res);\n\n      if (res.id <= 0) {\n        setMessage('User/Password combination incorrect');\n      } else {\n        var user = {\n          firstName: res.firstName,\n          lastName: res.lastName,\n          id: res.id\n        };\n        localStorage.setItem('user_data', JSON.stringify(user));\n        setMessage('');\n        window.location.href = '/CardPage';\n      }\n    } catch (e) {\n      alert(e.toString());\n      return;\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loginForm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: doLogin,\n    className: \"loginsForm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, \"Login To Seppi\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, \"Email address\"), /*#__PURE__*/React.createElement(\"input\", {\n    value: data.email,\n    onChange: handleChange,\n    name: \"email\",\n    type: \"email\",\n    className: \"form-control\",\n    id: \"loginEmail\",\n    \"aria-describedby\": \"emailHelp\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    value: data.password,\n    onChange: handleChange,\n    name: \"password\",\n    type: \"password\",\n    className: \"form-control\",\n    id: \"loginPassword\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, \"Submit\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 18\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Link, {\n    className: \"col-md-4 mt-4 text-left\",\n    to: \"/ForgotPassword\",\n    style: {\n      color: \"blue\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, \"Forgot password?\", \" \")), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"col-md-8 mt-4 text-right\",\n    id: \"switchToRegister\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, \"Don't have an account?\", \" \", /*#__PURE__*/React.createElement(Link, {\n    className: \"btn btn-primary\",\n    to: \"/register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, \"Register\")))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    id: \"loginResult\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 10\n    }\n  }, message))));\n};\n\nexport default Login;","map":{"version":3,"sources":["/mnt/c/Users/sfind/Desktop/COP4331-Large-Project/seppi-project/src/components/Login.js"],"names":["React","useState","LoginToRegister","Link","Login","app_name","buildPath","route","process","env","NODE_ENV","initialState","email","password","data","setData","message","setMessage","handleChange","event","target","name","value","doLogin","preventDefault","obj","js","JSON","stringify","response","fetch","method","body","headers","res","parse","text","alert","id","user","firstName","lastName","localStorage","setItem","window","location","href","e","toString","color"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport LoginToRegister from './LoginToRegister';\nimport {Link} from \"react-router-dom\"\nconst Login=() => {\n    const app_name = 'seppi'\n\n    const buildPath=(route)=> {\n        if (process.env.NODE_ENV === 'production') \n        {\n            return 'https://' + app_name +  '.herokuapp.com/' + route;\n        }\n        else\n        {        \n            return 'http://localhost:5000/' + route;\n        }\n    }\n    const initialState = {\n        email: \"\",\n        password: \"\",\n          };\n  const [data, setData] = React.useState(initialState);\nconst   [message, setMessage] = React.useState('')  \n  const handleChange = event => {\n      setData({\n        ...data,\n        [event.target.name]: event.target.value\n      });\n    };\n    const doLogin = async event => {\n        event.preventDefault();\n\n        var obj = {email: data.email.value,\n                   password:data.password.value\n                   };\n        var js = JSON.stringify(obj);\n        // alert(js);\n        try\n        {    \n            const response = await fetch(buildPath('api/login'),\n                {method:'POST',\n                body:js,\n                headers:{'Content-Type': 'application/json'}\n            });\n\n            var res = JSON.parse(await response.text());\n            alert(res);\n            if( res.id <= 0 )\n            {\n                setMessage('User/Password combination incorrect');\n            }\n            else\n            {\n                var user = {firstName:res.firstName,lastName:res.lastName,id:res.id}\n                localStorage.setItem('user_data', JSON.stringify(user));\n\n                setMessage('');\n                window.location.href = '/CardPage';\n            }\n        }\n        catch(e)\n        {\n            alert(e.toString());\n            return;\n        }    \n    };\n\n    return(\n       <div className=\"loginForm\">\n        <div className=\"container\">\n        <form \n        onSubmit={doLogin} className=\"loginsForm\">\n        <h1>Login To Seppi</h1>\n        <div className=\"form-group\">\n          <label htmlFor=\"email\">Email address</label>\n          <input\n            value={data.email}\n            onChange={handleChange}\n            name=\"email\"\n            type=\"email\"\n            className=\"form-control\"\n            id=\"loginEmail\"\n            aria-describedby=\"emailHelp\"\n            required\n          />\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"password\">Password</label>\n          <input\n            value={data.password}\n            onChange={handleChange}\n            name=\"password\"\n            type=\"password\"\n            className=\"form-control\"\n            id=\"loginPassword\"\n            required\n          />\n        </div>\n        <button type=\"submit\" className=\"btn btn-primary\">\n          Submit\n        </button><br/>\n        <div className=\"row\">\n      <p> <Link className=\"col-md-4 mt-4 text-left\" to=\"/ForgotPassword\"  style={{color:\"blue\"}}>\n          Forgot password?{\" \"}\n          </Link></p>\n        <p className=\"col-md-8 mt-4 text-right\" id=\"switchToRegister\">\n          Don't have an account?{\" \"}\n          <Link className=\"btn btn-primary\" to=\"/register\">\n            Register\n          </Link>\n        </p>\n</div>\n      </form>\n      <div>\n         <span id=\"loginResult\">{message}</span>\n       </div>\n        </div>\n      </div>\n\n    );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}